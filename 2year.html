<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Svt - CDP 2018</title>
    <script src="js/pixi.min.js"></script>
    <link rel="stylesheet" href="css/2year.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous"></script>
    <link href="http://www.dota2.com/public/css/blog/play.css?v=b4223247" rel="stylesheet" type="text/css">
    <script src="js/jquery.slides.min.js"></script>
    <script src="js/environmentSetup.js"></script>
    <script src="js/zones.js"></script>
    <script src="js/collision.js"></script>
    <script src="js/keyboard.js"></script>
</head>
<body>
<div id="canvas"></div>
<div id="memory">
    <img id="image" src="" height="100%">
</div>
<div class="containter">

    <div class="step " style="position: relative;text-align: center" >
        <div class="info fromLeft  ">
            <h1>2 Años</h1>
            <h1>25 Meses</h1>
            <h1>108 Semanas</h1>
            <h1>765 Días</h1>
            <h1>18 288 Horas</h1>
            <h1>1 097 280 Minutos</h1>
        </div>
        <div class="picture">
            <img src="http://west.yowconference.com.au/wp-content/uploads/sites/17/2017/03/thoughtworks.png"
                 width="70%" style="margin: 120px auto auto;">
        </div>
    </div>
    <div class="step" style="position: relative;text-align: center" >
        <div class="vertical-item fromLeft grayFont uno" style="background-color: #282F38">
            <h1>Clases EPN</h1>
            <div class="content">
                <img src="assets/png/2year/fotos/clases.jpg" width="100%">
            </div>
        </div>
        <div class="vertical-item fromLeft grayFont dos" style="background-color: #36334B">
            <h1>DjangoGirls</h1>
            <div class="content">
                <img src="assets/png/2year/fotos/djgano.jpg" width="100%">
            </div>
        </div>
        <div class="vertical-item fromLeft grayFont tres" style="background-color: #4F3C5A">
            <h1>Taller TDD</h1>
            <div class="content">
                <img src="assets/png/2year/fotos/taller.jpg" width="100%">
            </div>
        </div>
    </div>
    <div class="step" style="position: relative;text-align: center" >
        <div class="arrow"></div>
        <div class="badge">
            <img src="https://logodownload.org/wp-content/uploads/2016/11/latam-logo-19.png" width="40%" >
        </div>
        <div class="big-text">27 / 06 / 2016</div>589
    </div>
    <div class="step" style="position: relative;" >
        <img src="https://i.imgur.com/MWtv3oN.gif" width="100%">
    </div>
    <div class="step blue-gradient">
        <div class="info fromLeft grayFont">
            <h1>Teach Lead training</h1>
            <p>
                A training course for Tech Leads by Tech Leads.
                This course focuses on technical leadership skills for Tech Leads through discussion,
                theory and practical exercises, opposed to general leadership skills for Tech Leads.
                We explore the unique combination of skills and experiences that distinguish a “Tech Lead”
                from a “Leader working in a technical environment.”
            </p>
        </div>
        <div class="picture ">

            <div class="skillCard" style="transform: rotate(-10deg);top:160px; left: 40px;">
                <div class="skillIcon">
                    <img src="https://www.shareicon.net/data/2016/08/13/808674_comic_512x512.png">
                </div>
                <div class="skillName">Risk management</div>
            </div>
            <div class="skillCard" style="top:140px; left: 230px;">
                <div class="skillIcon">
                    <img src="./assets/png/2year/building.png">
                </div>
                <div class="skillName">Architecture</div>
            </div>
            <div class="skillCard" style="transform: rotate(10deg);top:160px; left: 420px;">
                <div class="skillIcon">
                    <img src="https://vignette.wikia.nocookie.net/leagueoflegends/images/b/b9/Mage_Large.png/revision/latest?cb=20140907112829">
                </div>
                <div class="skillName">Soft Skills</div>
            </div>
        </div>
    </div>
    <div class="step ">
        <div class="info fromLeft  ">
            <h1>Threat modeling</h1>
            <p>
                Todo el equipo se reunió en Quito para participar de un modelo de amenazas sobre los flujos del CAP.
                Fue abierto a la oficina y participaron TWers con conocimiento en seguridad.
            </p>
        </div>
        <div class="picture vine-gradient">
            <img src="https://mir-s3-cdn-cf.behance.net/project_modules/disp/cbb11c11608153.560fa6ea41721.png"
                 height="400px" style="margin: 120px auto auto;">
        </div>
    </div>
    <div class="step ">
        <div class="info fromLeft  ">
            <h1>Appsec 101</h1>
            <p>
                AppSec101 is an eight hour workshop focusing on basic application
                security covering threat modeling, secure software principles,
                and a set of workshops each based around a threat from the OWASP Top 10.
                It is designed for all roles of a delivery team.
            </p>
        </div>
        <div class="picture vine-gradient">
            <img src="https://orig00.deviantart.net/5398/f/2016/297/0/5/_wow__night_elf__render__by_popokupingupop90-dam60wp.png"
                 height="400px" style="margin: 120px auto auto;">
        </div>
    </div>
    <div class="step bg-latam" style="position: relative;">
        <div class="portrait-container">
            <div class="portrait">
                <img src="assets/png/2year/equipo/dnice.png" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/dani.png" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/Jenny.jpg" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/mayrilis.png" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/foto_credencial.jpg" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/byron.png" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/freddy.png" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/hector.png" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/ManuelMedina.png" width="100%" height="100%">
            </div>
            <div class="portrait">
                <img src="assets/png/2year/equipo/sebas.png" width="100%" height="100%">
            </div>
        </div>
        <div class="arrow"></div>
    </div>
    <div class="step ">
        <div class="info fromLeft" style="background-color: #F2EEF8">
            <h1>Manual de seguridad para equipos ágiles</h1>
            <p>
                Consejos prácticos, accionables en torno a la seguridad de
                tu producto, que puedes llevar a cabo en un proyecto con equipos ágiles,
                para reducir estas brechas y garantizar la seguridad y privacidad de sus usuarios.
            </p>
        </div>
        <div class="picture">
            <img src="assets/png/2year/fotos/xconf.svg"
                 height="180px" style="margin: 120px auto auto;">
        </div>
    </div>
    <div class="step" style="position: relative;text-align: center" >
        <div class="arrow"></div>
        <div class="badge">
            <img src="https://logodownload.org/wp-content/uploads/2016/11/latam-logo-19.png" width="40%" >
        </div>
    </div>
    <div class="step stats" style="position: relative;text-align: center" ></div>
    <div class="step" style="position: relative;text-align: center;background-color: #1B2838" >
        <div class="item">
            <div class="item-content">
                <h1>Front end</h1>
                <p>Tecnologías de front end y UX</p>
            </div>
            <div class="item-content">
                <h1>Liderazgo</h1>
                <p>+ Soft skills</p>
            </div>
            <div class="item-content">
                <h1>Seguridad</h1>
                <p>Asistir a eventos</p>
            </div>
            <div class="item-content">
                <h1>Appsec 101</h1>
                <p>Regularmente como parte del onboarding</p>
            </div>
            <div class="item-content">
                <h1>Security champions</h1>
                <p>Capacitación / Descripción del rol</p>
            </div>
            <div class="item-content">
                <h1>Grupo de Tech Leads</h1>
                <p>Trainer / Organizador</p>
            </div>
            <div class="item-content">
                <h1>Dev ops</h1>
                <p></p>
            </div>
            <div class="item-content">
                <h1>Proyecto en inglés</h1>
                <p></p>
            </div>
            <div class="item-content">
                <h1>Coaching</h1>
                <p></p>
            </div>
        </div>

    </div>
    <div class="step" style="position: relative;text-align: center;background-color: #1C2938;"  >
        <img src="assets/png/2year/fotos/todos.jpg" height="100%" style="margin: auto" >
    </div>
</div>
<script type="text/javascript">
    $(".vertical-item").hover(() => {
        $(this).animate({width: "500px"});
    }, () => {
        $(this).animate({width: "19..9%"});
    });
    var Container = PIXI.Container,
        autoDetectRenderer = PIXI.autoDetectRenderer,
        loader = PIXI.loader,
        resources = PIXI.loader.resources,
        Sprite = PIXI.Sprite;
    var stage = new Container();
    var state;
    var contentDiv = $("#canvas");
    var screenWidth = contentDiv.width();
    var screenHeight = contentDiv.height() - 4;
    var renderer = autoDetectRenderer(screenWidth, screenHeight, {transparent: true});
    var player;
    var idleFrames = [];
    var walkingFrames = [];
    var attackingFrames = [];
    var bullets = [];
    var jumpFrames = [];
    var gunAttackingFrames = [];
    var whiteTeleportFrames = [];
    var smokeFrames = [];
    var swordAttackingFrames = [];
    var scrollCount = 1;
    var memories = ['','diploma.jpg','','','tlt.jpg','threatModeling.jpg','','','xconf.jpg'];

    /*Team*/
    var teamFrames = [[], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], []];
    var teamPositions = [[180, 100],[450, 100],[720, 100],[990,100],[1260,100],[180,300],[450,300],[720,300],[990,300], [1260,300]];
    var team = [];

    var teleportFrameCount = 0;
    var teleport;
    var smoke;
    var plane;
    var truck;
    var planeFull;
    var xScale = 0.30;
    var left = keyboard(37),
        right = keyboard(39),
        space = keyboard(32),
        esc = keyboard(27),
        ctrl = keyboard(17),
        xkey = keyboard(88),
        vkey = keyboard(86),
        qkey = keyboard(81),
        akey = keyboard(65),
        ckey = keyboard(67);
    contentDiv.append(renderer.view);
    loadPlayerAssets();
    loadTeleportAssets();
    loadSmokeAssets();
    loadTeamAssets();
    loader.add("./assets/png/Object/sword.png")
        .add("./assets/png/Object/gun.png")
        .add("./assets/png/2year/equipo/plane.png")
        .add("./assets/png/2year/equipo/planeFull.png")
        .add("./assets/png/2year/equipo/truck.png")
        .load(setup);
    let fourText = new PIXI.Text('4',{fontFamily : 'Arial', fontSize: 600, fill : 0x212C7E, align : 'center'});
    fourText.x = screenWidth / 2 - 150;
    fourText.y = screenHeight - 800;

    var buildAnimation = {
        target: {x: screenWidth / 2, y: screenHeight - 200},
        done: false,
        completed: [],
        result: fourText,
        postAnimation: () => {
            setTimeout(() => {
                team.map((member) => {
                    member.x = member.standByPosition.x
                });
            },2000);
        },
        preAnimation: () => {

        }
    };

    var truckCommingAnimation = {
        target: {x: 600, y: screenHeight - 200},
        done: false,
        completed: [],
        result: null,
        smoke: false,
        postAnimation: () => {
            truck.vx=-8 ;
            setTimeout(() => {
                truck.vx=0;
                player.vx=0;
                team.map((member) => {
                    member.vx=0;
                });
            },10000);
        },
        preAnimation: () => {
            truck.position.set(screenWidth +1200, 540);
            stage.addChild(truck);
            setTimeout(() => {
                player.vx=-8;
                team.map((member) => {
                    member.vx=-8;
                });
            },4300);
        }
    };

    var truckReturningAnimation = {
        target: {x: screenWidth+800, y: 200},
        done: false,
        completed: [],
        result: null,
        smoke: false,
        postAnimation: () => {
            truck.vx=-8 ;
            player.vx=-8;
            team.map((member) => {
                member.vx=-8;
            });
            setTimeout(() => {
                truck.vx=0;
                player.vx=0;
                team.map((member) => {
                    member.vx=0;
                    member.x = member.standByPosition.x;
                    member.y = screenHeight - member.height / 2 -10;
                });
            },10000);
        },
        preAnimation: () => {
            truck.position.set(screenWidth +1200, 540);
            player.y=200;
            player.x=screenWidth+900;
            team.map((member) => {
                member.y=200;
                member.x=screenWidth+800;
            });
            stage.addChild(truck);
            setTimeout(() => {
                player.vx=-8;
                team.map((member) => {
                    member.vx=-8;
                });
            },4300);
        }
    };

    var planeAnimation = {
        target: {x: screenWidth - screenWidth / 3, y: screenHeight - 200},
        done: false,
        completed: [],
        result: plane,
        postAnimation: () => {
            setTimeout(() => {
                team.map((member) => {
                    member.x = member.standByPosition.x
                });
            },2000);
        },
        preAnimation: () => {
            stage.removeChild(fourText);
        }
    };

    var leaveAnimation = {
        target: {x: screenWidth / 2, y: screenHeight - 200},
        done: false,
        completed: [],
        result: null,
        postAnimation: () => {
            setTimeout(() => {
                team.map((member) => {
                    stage.removeChild(member);
                });
            },500);
            setTimeout(() => {
                planeFull.vx=-2;
                planeFull.vy=-0.5;
            },4000);
        },
        preAnimation: () => {
            setTimeout(() => {
                planeFull.x = plane.x;
                planeFull.y = plane.y;
                stage.removeChild(plane);
            },2300);
        }
    };

    var animations = [truckCommingAnimation,truckReturningAnimation,buildAnimation, planeAnimation, leaveAnimation];
    var animation = null;


    function setup() {

        setKeyboardFunctions();

        setEnvironment();

        renderer.render(stage);

        state = play;

    }

    function gameLoop() {
        requestAnimationFrame(gameLoop);
        state();
        renderer.render(stage);
    }

    function play() {
        processCharacterMovement();
    }

    function processCharacterMovement() {

        if(planeFull.vx !== 0){
            planeFull.x += planeFull.vx;
        }
        if(planeFull.vy !== 0){
            planeFull.y += planeFull.vy;
        }

        if(truck.vx !== 0){
            truck.x += truck.vx;
        }

        team.map((member, index) => {
            try{
                if(member.vx !== 0){
                    member.x += member.vx;
                }
                if(member.vy !== 0){
                    stage.getChildIndex(member);
                    if(member.y < calculateFloorYPosition(member) - member.height){
                        member.y += member.vy;
                        if(index < 5){
                            member.x+=1.8;
                        }
                    }else{
                        member.y = calculateFloorYPosition(member)  - member.height;
                        member.vy = 0;
                        member.standByPosition = { x: member.x, y: member.y };
                    }
                }
            }catch (error){}

        });
        if( animation !== null){
            animation.preAnimation();
            team.map((member) => {
                if(animation.completed.indexOf(member) === -1) {
                    if (member.x > animation.target.x) {
                        member.x -= 5;
                        if (member.x < animation.target.x) {
                            member.x = animation.target.x;
                        }
                        member.scale.x = xScale * -1;
                    }
                    if (member.x < animation.target.x) {
                        member.x += 5;
                        if (member.x > animation.target.x) {
                            member.x = animation.target.x;
                        }
                        member.scale.x = xScale;
                    }
                    if (member.x === animation.target.x) {
                        animation.completed.push(member);
                    }
                }
            });
            if(animation.completed.length === 10){
                animation.done = true;
                if(animation.smoke!==false){
                    stage.addChild(smoke);
                    smoke.gotoAndPlay(0);
                    smoke.x=animation.target.x;
                    smoke.y=animation.target.y - smoke.height / 3;
                    smoke.scale.set(3);
                    smoke.onComplete = () => {
                        stage.removeChild(smoke);
                    };
                }
                if(animation.result) {
                    stage.addChild(animation.result);
                }

            }
            if(animation.done){
                animation.postAnimation();
                animation = null;
            }
        }

        let hitsLimits = contain(player, {
            x: -500,
            y: 10,
            width: screenWidth * 2+ player.width / 2,
            height: calculateFloorYPosition(player)
        });

        if (hitsLimits === "bottom" && player.state !== "jumping") {
            player.vy = 0;
        }

        if (player.vy !== 0)
            player.vy += 0.4;
        player.x += player.vx;
        player.y += player.vy;
        if (!player.playing && player.vy > 0) {
            if (!right.isDown && !left.isDown) {
                idleAnimation();
            } else {
                setWalkingAnimation();
            }
            player.loop = true;
            player.play();
        }

        if(scrollCount === 2){
            if(player.x < screenWidth / 3){
                $(".uno").css({ width: "70%"});
                $(".dos").css({ width: "15%"});
                $(".tres").css({ width: "15%"});
            }else{
                if(player.x < (screenWidth / 3) * 2){
                    $(".uno").css({ width: "15%"});
                    $(".dos").css({ width: "70%"});
                    $(".tres").css({ width: "15%"});
                }else{
                    $(".uno").css({ width: "15%"});
                    $(".dos").css({ width: "15%"});
                    $(".tres").css({ width: "70%"});
                }
            }
        }
    }

    function setEnvironment() {
        world = new Container();
        world.vx = 0;
        loadAnimationFrames();
        loadTeleportFrames();
        loadSmokeFrames();
        loadTeamFrames();

        teleport = new PIXI.extras.AnimatedSprite(whiteTeleportFrames);

        teleport.animationSpeed = 0.15;
        teleport.play();
        teleport.anchor.set(0.5);
        teleport.scale.set(1);
        teleport.loop = false;

        smoke = new PIXI.extras.AnimatedSprite(smokeFrames);
        smoke.animationSpeed = 0.1;
        smoke.anchor.set(0.5);
        smoke.scale.set(1);
        smoke.loop = false;

        plane = new PIXI.extras.AnimatedSprite([PIXI.Texture.fromFrame("./assets/png/2year/equipo/plane.png")]);
        plane.anchor.set(0.5);
        plane.scale.set(0.3);
        plane.loop = false;
        plane.position.set(screenWidth - screenWidth / 3, 350);
        planeAnimation.result = plane;
        plane.vx=0;
        plane.vy=0;

        planeFull = new PIXI.extras.AnimatedSprite([PIXI.Texture.fromFrame("./assets/png/2year/equipo/planeFull.png")]);
        planeFull.anchor.set(0.5);
        planeFull.scale.set(0.3);
        planeFull.loop = false;
        planeFull.position.set(screenWidth - screenWidth / 3, 350);
        leaveAnimation.result = planeFull;
        planeFull.vx=0;
        planeFull.vy=0;

        truck = new PIXI.extras.AnimatedSprite([PIXI.Texture.fromFrame("./assets/png/2year/equipo/truck.png")]);
        truck.anchor.set(0.5);
        truck.scale.set(1.5);
        truck.loop = false;
        truck.position.set(screenWidth - screenWidth / 3, 350);
        truck.vx=0;
        truck.vy=0;


        player = new PIXI.extras.AnimatedSprite(idleFrames);
        player.animationSpeed = 0.3;
        player.play();
        player.anchor.set(0.5);
        player.scale.set(xScale);
        player.vx = 0;
        player.vy = 0;
        player.attack = 0;
        player.inventory = [];
        player.attackingFrames = attackingFrames;
        player.position.set(300, 350);
        for(i=0; i< 10; i++){
            let teamMember = new PIXI.extras.AnimatedSprite(teamFrames[i*2]);
            teamMember.animationSpeed = 0.12;
            teamMember.play();
            teamMember.anchor.set(0.5);
            teamMember.scale.set(xScale);
            teamMember.position.set(teamPositions[i][0],teamPositions[i][1]);
            teamMember.runFrames = teamFrames[i + i*2 + 1];
            teamMember.vy = 10;
            teamMember.vx = 0;
            team.push(teamMember);
        }
    }

    function spawnCharacter() {
        try {
            stage.getChildIndex(player);
            stage.addChild(teleport);
            teleport.position.set(player.position.x, player.position.y);
            teleport.onComplete = () => {
                stage.removeChild(teleport);
                stage.removeChild(player);
            };
            teleport.onFrameChange = null;
            teleport.gotoAndPlay(0);

        } catch (error) {
            teleportFrameCount = 0;
            teleport.position.set(300, screenHeight - 100);
            stage.addChild(teleport);
            teleport.onFrameChange = function () {
                teleportFrameCount++;
                if (teleportFrameCount > teleport.totalFrames - 5) {
                    player.position.set(300, screenHeight);
                    player.scale.set(xScale - 0.05 * (teleport.totalFrames - teleportFrameCount));
                    stage.addChild(player);
                }
            };
            teleport.onComplete = () => {
                stage.removeChild(teleport);
            };
            teleport.gotoAndPlay(0);
        }
    }

    function walkAnimation(direction) {
        if (player.state !== "walking") {
            player.textures = walkingFrames;
            player.scale.x = xScale * direction;
            player.state = "walking";
        }
    }

    function idleAnimation() {
        if (player.state !== "idle") {
            player.textures = idleFrames;
            player.state = "idle";
        }
    }

    function attackAnimation() {
        if (player.state !== "attacking") {
            player.textures = player.attackingFrames;
            player.state = "attacking";
            if (player.textures === gunAttackingFrames) {
                var bullet = new Sprite(resources["./assets/png/Object/bullet-2.png"].texture);
                bullet.anchor.set(0.5);
                bullet.scale.set(0.08);
                bullet.y = player.y + player.height / 5;
                bullets.push(bullet);
                if (player.facing === "right") {
                    bullet.vx = 10;
                    bullet.x = player.x + player.width / 2;
                } else {
                    bullet.scale.x = -0.08;
                    bullet.vx = -10;
                    bullet.x = player.x - player.width / 2;
                }
                stage.addChild(bullet);
            }
        }
    }

    function jumpAnimation() {
        if (player.state !== "jumping") {
            player.textures = jumpFrames;
            player.state = "jumping";
            player.loop = false;
        }
    }

    function setWalkingAnimation() {
        if (player.vx > 0 || world.vx < 0) {
            walkAnimation(1);
        } else {
            walkAnimation(-1);
        }
    }

    function calculateFloorYPosition(sprite) {
        return screenHeight + sprite.height / 2 ;
    }

    function setKeyboardFunctions() {
        left.press = function () {
            if (!right.isDown) {
                walkAnimation(-1);
                player.vx = -5;
                player.facing = "left";
            }
        };

        left.release = function () {
            player.vx = 0;
            world.vx = 0;
            idleAnimation();
        };

        right.press = function () {
            if (!left.isDown) {
                walkAnimation(1);
                player.vx = 5;
                player.facing = "right";
            }
        };
        right.release = function () {
            player.vx = 0;
            world.vx = 0;
            idleAnimation();
        };

        space.press = function () {
            if (player.vy === 0) {
                player.vy = -12;
                jumpAnimation();
            }
        };

        ctrl.press = function () {
            attackAnimation();
        };

        ctrl.release = function () {
            if (player.vx === 0 && world.vx === 0) {
                idleAnimation();
            } else {
                setWalkingAnimation();
            }
        };

        esc.release = function () {
            $(".photoContainer").hide();
            $(".slider").hide();
        };

        xkey.release = function () {
            spawnCharacter();
        };

        vkey.release = function () {
            for(i=0; i< 10; i++){
                stage.addChild(team[i]);
                team[i].vy = 10;
            }
        };

        ckey.release = function () {
            $("#memory").toggle();
            console.log("src","assets/png/2year/fotos/"+memories[scrollCount-1], scrollCount)
            $("#image").attr("src","assets/png/2year/fotos/"+memories[scrollCount-1]);
            $("#memory").css({
                top: (screenHeight * scrollCount)  - $("#memory").height() - player.height,
                left: player.position.x - $("#memory").children()[0].width / 2
            });
        };
        qkey.release = function () {
            window.scrollTo(0,(screenHeight + 5) * scrollCount);
            scrollCount ++ ;
        };
        akey.release = () => {
            if(animations.length > 0){
                animation = animations.splice(0,1)[0];
            }
        }
    }

    gameLoop();

</script>
</body>
</html>